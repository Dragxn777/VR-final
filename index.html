<!DOCTYPE html>
<html>

<head>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v$npm_package_version/dist/aframe-physics-system.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/kylebakerio/ada-water/ada-water.js"></script>


</head>

<body>
  <a-scene fog="type: exponential; color: #fff000; density: 0.002">
    <a-assets>
      <a-asset-item id="FantasyHouse" src="./assets/FantasyHouse.glb"></a-asset-item>

      <img id="stars" src="./assets/sky_16_2k.png" alt=>
      <a-asset-item id="wall2" src="./assets/mur2.glb"></a-asset-item>
      <a-asset-item id="wall" src="./assets/mur.glb"></a-asset-item>
      <a-asset-item id="bolt" src="./assets/bolt.glb"></a-asset-item>
      <a-asset-item id="sword" src="./assets/sword.glb"></a-asset-item>
      <a-asset-item id="house1" src="./assets/medieval1.glb"></a-asset-item>
      <a-asset-item id="house2" src="./assets/medieval2.glb"></a-asset-item>
      <a-asset-item id="house3" src="./assets/medieval3.glb"></a-asset-item>
      <a-asset-item id="house4" src="./assets/medieval4.glb"></a-asset-item>
      <a-asset-item id="house5" src="./assets/medieval5.glb"></a-asset-item>
      <a-asset-item id="path" src="./assets/Path.glb"></a-asset-item>
      <a-asset-item id="mainpath" src="./assets/mainpath.glb"></a-asset-item>
      <a-asset-item id="secondpath" src="./assets/secondpath.glb"></a-asset-item>
      <a-asset-item id="fence" src="./assets/fence.glb"></a-asset-item>
      <a-asset-item id="coll" src="./assets/coll.glb"></a-asset-item>


      <img id="road" src="./assets/ground.png"></img>

      <img id="map" src="./assets/normalmap.png"></img>

      <img id="stone" src="./assets/stone.png" alt="">



    </a-assets>

    <a-entity id="rig" movement-controls position="0 0 -8" kinematic-body foo>
      <!-- Caméra attachée au rig -->
      <a-entity camera look-controls wasd-controls="fly: false; acceleration: 150;" position="0 1.6 -8"></a-entity>

      <!-- Contrôleurs VR -->
      <a-entity oculus-touch-controls="hand: left" ray-caster="objects: .clickable"></a-entity>
      <a-entity oculus-touch-controls="hand: right"></a-entity>


      <!-- Sabres -->

      <!-- <a-entity gltf-model="#sword" position="0.5 0.5 0" rotation="20 0 90" target="#rig" scale="0.0015 0.0015 0.0015"></a-entity>
      <a-entity gltf-model="#sword" position="-0.5 0.5 0" rotation="20 0 90" target="#rig" scale="0.0015 0.0015 0.0015"></a-entity> -->

      <a-entity laser-controls="hand: left" raycaster="objects: .clickable; far: 20; showLine: true"
        position="-0.5 1.5 -0.5"></a-entity>
      <a-entity laser-controls="hand: right" raycaster="objects: .clickable; far: 20; showLine: true"
        position="0.5 1.5 -0.5"></a-entity>
    </a-entity>


    <a-plane position="0 0 0" width="800" height="800" repeat="300 300" rotation="-90 0 0" roughness="1" static-body
      material="src: #road"></a-plane>
    <a-entity gltf-model="#coll" width="800" height="800" repeat="300 300" rotation="-90 0 0" position="0 10 0"></a-entity>

    <a-entity gltf-model="#wall" position="0 -1 15" scale="6 12 6"></a-entity>
    <a-entity gltf-model="#wall2" position="0 -1 160" scale="6 12 6"></a-entity>

    <a-entity gltf-model="#bolt" position="0 15 -325" scale="45 45 45" shadow="cast: false; receive: true;"></a-entity>

    <a-entity class="clickable" cursor-listener gltf-model="#palm" position="0 0 0" scale="0.5 0.5 0.5"
      visible="true"></a-entity>
    <a-entity id="appear" class="clickable" cursor-listener gltf-model="#bolt" position="0 0 0" scale="0.5 0.5 0.5"
      visible="false"></a-entity>

    <!-- Maisons -->
    <a-entity>

      <a-entity gltf-model="#house1" position="-10 0 -12" scale="3.5 3.5 3.5" rotation="0 90 0"></a-entity>

      <a-entity gltf-model="#house2" position="-10 0 -30" scale="3.5 3.5 3.5" rotation="0 90 0"></a-entity>

      <a-entity gltf-model="#house3" position="-10 0 -50" scale="3.5 3.5 3.5" rotation="0 90 0"></a-entity>

      <a-entity gltf-model="#house1" position="-10 0 -75" scale="3.5 3.5 3.5" rotation="0 0 0"></a-entity>

      <a-entity gltf-model="#house1" position="-25 0 -75" scale="3.5 3.5 3.5" rotation="0 0 0"></a-entity>

      <a-entity gltf-model="#house1" position="-40 0 -75" scale="3.5 3.5 3.5" rotation="0 0 0"></a-entity>

      <a-entity gltf-model="#house2" position="-40 0 -20" scale="3.5 3.5 3.5" rotation="0 90 0"></a-entity>

      <a-entity gltf-model="#house1" position="-40 0 -40" scale="3.5 3.5 3.5" rotation="0 90 0"></a-entity>

      <a-entity gltf-model="#house3" position="-10 0 -100" scale="5.5 5.5 5.5" rotation="0 0 0"></a-entity>

      <a-entity gltf-model="#house2" position="-40 0 -100" scale="3.5 3.5 3.5" rotation="0 90 0"></a-entity>

      <a-entity gltf-model="#house1" position="-40 0 -120" scale="3.5 3.5 3.5" rotation="0 90 0"></a-entity>

      <a-entity gltf-model="#house1" position="-20 0 -130" scale="5.5 5.5 5.5" rotation="0 0 0"></a-entity>





    </a-entity>

<!-- Chemin -->
    <a-entity>
        <a-entity gltf-model="#mainpath" position="-0 0 -6" scale="2 2 2" rotation="0 90 0"></a-entity>
        <a-entity gltf-model="#path" position="-3 0 -20" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-3 0 -23" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-6 0 -20" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-6 0 -23" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-9 0 -20" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-9 0 -23" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-12 0 -20" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-12 0 -23" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-15 0 -20" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-15 0 -23" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-18 0 -20" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-18 0 -23" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-21 0 -20" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#path" position="-21 0 -23" scale="2 2 2"></a-entity>
        <a-entity gltf-model="#mainpath" position="-24 0 105" scale="2 2 2" rotation="0 90 0"></a-entity>
        <a-entity gltf-model="#secondpath" position="-58 0 -60" scale="1.8 1.8 1.8" rotation="0 0 0"></a-entity>

    </a-entity>

<!-- Eau -->

<a-water position="-70 0.11 -50" scale="1.5 20 1"></a-water>
<a-entity gltf-model="#fence" position="-60 0 0" rotation="0 90 0"></a-entity>
<a-entity gltf-model="#fence" position="-80 0 0" rotation="0 90 0"></a-entity>

<!-- Lumières -->
    <a-light type="ambient" color="#ffffff" intensity="1.5"></a-light>
    <a-light type="directional" position="0 5 -22" color="#ffffff" intensity="0.7"></a-light>


    <a-sky src="#stars"></a-sky>
    </a-entity>
  </a-scene>

  <script>
    AFRAME.registerComponent("cursor-listener", {
      init: function () {
        this.el.addEventListener("click", function (evt) {
          this.setAttribute("visible", "false");
          document.getElementById("appear").setAttribute("visible", "true");
        });
      },
    });
  </script>

</body>

</html>